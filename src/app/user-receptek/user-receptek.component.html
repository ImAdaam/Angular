<!--<div *ngIf="recipes.length > 0">
    <h2>Receptek</h2>
    <ul>
    <li *ngFor="let recept of recipes">
    <h3>{{ recept.cim }}</h3>
    <p>{{ recept.leiras }}</p>
    <ul>
    <li *ngFor="let hozzavalo of recept.hozzavalok">
    {{ hozzavalo.mennyiseg }} {{ hozzavalo.egyseg }} {{ hozzavalo.anyag.nev }}
    </li>
    </ul>
    </li>
    </ul>
      </div>
      <div *ngIf="recipes.length === 0">
        <p>Nincsenek receptjeid.</p>
      </div>
-->

<!--
<div class="card">
    <h5>Receptek</h5>
    <input type="text" (input)="onSearch($event)" placeholder="Keresés...">


   
     <div class="allergen-list">
        <h6>Allergének:</h6>
        <div *ngFor="let allergen of allergenek">
            <label>
                <input type="checkbox" [value]="allergen.id" (change)="onAllergenChange($event)">
                {{ allergen.nev }}
            </label>
        </div>
    </div>
  
    <p-table [value]="filteredRecipes" [rows]="rows" [paginator]="true" [totalRecords]="totalRecords"
             (onPage)="onPageChange($event)" [rowsPerPageOptions]="rowsPerPageOptions">
      <ng-template pTemplate="header">
        <tr>
          <th pSortableColumn="cim">Cím <p-sortIcon field="cim"></p-sortIcon></th>
          <th pSortableColumn="leiras">Leírás <p-sortIcon field="leiras"></p-sortIcon></th>
          <th>Hozzávalók</th>
          <th>Allergének</th>
        </tr>
      </ng-template>
      <ng-template pTemplate="body" let-recept>
        <tr class="overflow">
          <td>{{ recept.cim }}</td>
          <td>{{ recept.leiras }}</td>
          <td>
            <ul>
              <li *ngFor="let hozzavalo of recept.hozzavalok">
                {{ hozzavalo.mennyiseg }} {{ hozzavalo.egyseg }} {{ hozzavalo.anyag.nev }}
              </li>
            </ul>
          </td>
          <td>
            <div class="allergen-icons">
                <div *ngFor="let allergen of recept.allergenek" class="allergen-icon-container" >
                  <img [src]="allergen.iconUrl" alt="{{ allergen.nev }}" width="24" height="24" class="allergen-icon">
                  <p class="allergen-name">{{ allergen.nev }}</p>
                </div>
            </div>
          </td>
        </tr>
      </ng-template>
    </p-table>
  </div>

-->

<div class="search-container">
  <div class="p-inputgroup search-bar">
      <span class="p-inputgroup-addon">
          <i class="pi pi-search"></i>
      </span>
      <input type="text" pInputText placeholder="Keresés..." (input)="onSearch($event)">
  </div>


  <p-multiSelect [options]="allergens" optionLabel="nev" optionValue="id" [(ngModel)]="selectedAllergens" (onChange)="filterRecipes()" [filter]="false" placeholder="Allergén szűrő" class="allergen-filter"></p-multiSelect>
  <button pButton type="button" icon="pi pi-plus" label="Új recept hozzáadása" (click)="navigateToCreateRecipe()"></button>
  <button pButton type="button" label="Összes recept" (click)="navigateBack()"></button>
  <button pButton type="button" label="Kijelentkezés" (click)="logout()"></button>
</div>

<p-table [value]="filteredRecipes" [paginator]="true" [rows]="10" [rowsPerPageOptions]="[10, 20, 50]" sortMode="multiple" [responsive]="true" class="custom-table">
  <ng-template pTemplate="header">
      <tr>
          <th pSortableColumn="cim">Cím <p-sortIcon field="cim"></p-sortIcon></th>
          <th pSortableColumn="leiras">Leírás <p-sortIcon field="leiras"></p-sortIcon></th>
          <th>Hozzávalók</th>
          <th>Allergének</th>
          <th>Műveletek</th>
      </tr>
  </ng-template>
  <ng-template pTemplate="body" let-recept>
      <tr>
          <td>{{ recept.cim }}</td>
          <td>{{ recept.leiras }}</td>
          <td>
              <ul class="ingredient-list">
                  <li *ngFor="let hozzavalo of recept.hozzavalok">
                      {{ hozzavalo.anyag.nev }} - {{ hozzavalo.mennyiseg }} {{ hozzavalo.egyseg }}
                  </li>
              </ul>
          </td>
          <td>
              <div *ngFor="let allergen of recept.allergenek" class="allergen-item">
                  <img [src]="allergen.iconUrl" alt="{{ allergen.nev }}" title="{{ allergen.nev }}" class="allergen-icon">
                  <span>{{ allergen.nev }}</span>
              </div>
          </td>
          <td>
            <button pButton type="button" icon="pi pi-trash" class="p-button-danger" (click)="confirmDelete(recept.id)"></button>
            
            <button pButton type="button" icon="pi pi-pencil" (click)="editRecipe(recept.id)"></button>
          </td>
      </tr>
  </ng-template>
</p-table>

<p-confirmDialog></p-confirmDialog>

